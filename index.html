<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>If I Forget You First</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black;
    font-family: "Georgia", serif;
    overflow: hidden;
}

/* ===== BACKGROUND ===== */
#background {
    position: fixed;
    inset: 0;
    background: url("bg_station.jpeg") center / cover no-repeat;
    filter: brightness(0.75);
}

/* ===== SPRITES ===== */
.sprite {
    position: absolute;
    bottom: 110px;
    width: 40%;
    max-width: 300px;
    transition: opacity 0.6s, filter 0.6s;
}

#airi {
    left: 5%;
}

#shino {
    right: 5%;
}

.fading {
    opacity: 0.4;
    filter: blur(2px);
}

/* ===== TEXT BOX ===== */
#textbox {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(15, 15, 25, 0.9);
    border-top: 2px solid rgba(255,255,255,0.1);
    padding: 16px;
    box-sizing: border-box;
}

#name {
    font-weight: bold;
    color: #d6b3ff;
    margin-bottom: 6px;
}

#text {
    color: #f0f0f5;
    line-height: 1.6;
    min-height: 70px;
}

/* ===== CHOICES ===== */
#choices {
    margin-top: 12px;
}

.choice {
    width: 100%;
    margin-top: 6px;
    padding: 12px;
    font-size: 16px;
    background: rgba(30,30,50,0.95);
    border: none;
    color: #fff;
    border-radius: 6px;
}

.choice:hover {
    background: rgba(60,60,90,1);
}
</style>
</head>

<body>

<div id="background"></div>

<img id="airi" class="sprite" src="airi.png" style="display:none;">
<img id="shino" class="sprite" src="shino.png" style="display:none;">

<div id="textbox">
    <div id="name"></div>
    <div id="text"></div>
    <div id="choices"></div>
</div>

<script>
let state = {
    scene: "start",
    closeness: 0
};

const scenes = {
    start: {
        name: "Airi",
        speaker: "airi",
        text: "I met her at the train station café. She never stayed long.",
        choices: [
            { text: "Talk to her again", next: "meetShino", closeness: 1 },
            { text: "Keep your distance", next: "distance", closeness: 0 }
        ]
    },

    meetShino: {
        name: "Shino",
        speaker: "shino",
        text: "You don’t have to remember me. Most people don’t.",
        choices: [
            { text: "I want to know you", next: "closeRoute", closeness: 2 },
            { text: "Why would you say that?", next: "question", closeness: 1 }
        ]
    },

    question: {
        name: "Shino",
        speaker: "shino",
        text: "Because things that stay too long tend to disappear suddenly.",
        choices: [
            { text: "Stay anyway", next: "closeRoute", closeness: 2 },
            { text: "Step back", next: "distance", closeness: 0 }
        ]
    },

    closeRoute: {
        name: "Airi",
        speaker: "airi",
        text: "The closer I got, the more something felt wrong. Like she was slipping away.",
        choices: [
            { text: "Cling to her", next: "clingEnding", closeness: 3 },
            { text: "Pretend everything is normal", next: "pretendEnding", closeness: 3 }
        ]
    },

    distance: {
        name: "Airi",
        speaker: "airi",
        text: "I told myself distance would hurt less.",
        choices: [
            { text: "Confess too late", next: "lateEnding", closeness: 0 }
        ]
    },

    clingEnding: {
        name: "Airi",
        speaker: "airi",
        text: "I wrote everything down. And still—one morning—I couldn’t remember who it was about.",
        ending: true
    },

    pretendEnding: {
        name: "Shino",
        speaker: "shino",
        text: "I’m glad I met you. Even if you forget.",
        ending: true
    },

    lateEnding: {
        name: "Airi",
        speaker: "airi",
        text: "I told her I loved her. She was already gone.",
        ending: true
    }
};

function renderScene() {
    const scene = scenes[state.scene];

    document.getElementById("name").textContent = scene.name;
    document.getElementById("text").textContent = scene.text;
    const choicesDiv = document.getElementById("choices");
    choicesDiv.innerHTML = "";

    // Sprites
    document.getElementById("airi").style.display = "none";
    document.getElementById("shino").style.display = "none";

    if (scene.speaker === "airi") {
        document.getElementById("airi").style.display = "block";
    }

    if (scene.speaker === "shino") {
        const shino = document.getElementById("shino");
        shino.style.display = "block";
        shino.classList.toggle("fading", state.closeness >= 3);
    }

    if (scene.ending) {
        const btn = document.createElement("button");
        btn.textContent = "Restart";
        btn.className = "choice";
        btn.onclick = () => {
            state = { scene: "start", closeness: 0 };
            renderScene();
        };
        choicesDiv.appendChild(btn);
        return;
    }

    scene.choices.forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice.text;
        btn.className = "choice";
        btn.onclick = () => {
            state.scene = choice.next;
            state.closeness += choice.closeness || 0;
            renderScene();
        };
        choicesDiv.appendChild(btn);
    });
}

renderScene();
</script>

</body>
</html>
